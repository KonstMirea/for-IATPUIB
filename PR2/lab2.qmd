---
title: "Основы обработки данных с помощью R и Dplyr"
subtitle: "Отчет по практике №2"
author: "KTMUSIC22682@yandex.ru"
format: 
  md:
    output-file: README.md
---
## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()


### Установка dplyr

install.packages("dplyr") also installing the dependencies ‘utf8’, ‘pkgconfig’, ‘generics’, ‘pillar’, ‘tibble’, ‘tidyselect’ trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/utf8_1.2.6.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/pkgconfig_2.0.3.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/generics_0.1.4.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/pillar_1.11.1.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/tibble_3.3.0.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/tidyselect_1.2.1.tgz' trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/dplyr_1.1.4.tgz'

The downloaded binary packages are in /var/folders/ns/z016wxgs06n20ddlstgmcgmw0000gn/T//RtmpzMTynq/downloaded_packages trying URL 'https://mirror.truenetwork.ru/CRAN/bin/macosx/big-sur-arm64/contrib/4.5/dplyr_1.1.4.tgz' Content type 'application/octet-stream' length 1614595 bytes (1.5 MB) ================================================== downloaded 1.5 MB


### Подключение dplyr
```{r}
library(dplyr)
```

### Сколько строк в датафрейме?
```{r}
nrow(starwars)
```


### Сколько столбцов в датафрейме?
```{r}
ncol(starwars)
```

### Как просмотреть примерный вид датафрейма?
```{r}
glimpse(starwars)
```


### Сколько уникальных рас персонажей (species) представлено в данных?
```{r}
starwars %>% summarise(количество_уникальных_рас = n_distinct(species))
```


### Найти самого высокого персонажа.
```{r}
starwars %>%
      filter(height == max(height, na.rm = TRUE))
```


### Найти всех персонажей ниже 170
```{r}
starwars %>% filter(height < 170)
```


### Подсчитать ИМТ (индекс массы тела) для всех персонажей.
```{r}
starwars %>%
     mutate(height_m = height / 100,bmi = mass / (height_m)^2) %>%
     select(name, mass, height, bmi)
```


### Найти 10 самых “вытянутых” персонажей.“Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей.
```{r}
 starwars %>% 
     mutate(stretch_ratio = mass / height) %>% 
     arrange(desc(stretch_ratio)) %>% 
     slice_head(n = 10)
```


### Найти средний возраст персонажей каждой расы вселенной Звездных войн.
```{r}
starwars %>%
     mutate(current_year = 100,age = current_year + birth_year) %>%
     filter(!is.na(age) & !is.na(species)) %>%
     group_by(species) %>%
     summarise(average_age = mean(age),count = n()) %>%
     arrange(desc(average_age))
```


### Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.
```{r}
starwars %>% 
     filter(!is.na(eye_color)) %>% 
     count(eye_color, sort = TRUE) %>% 
     slice(1)
```


### Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.
```{r}
starwars %>%
     filter(!is.na(name) & !is.na(species)) %>%
     group_by(species) %>%
     summarise(average_name_length = mean(nchar(name)))
```

## Оценка результатов

В данной практической работе мы применили знания полученные в результате первой практической работы для обработки массива данных.

## Вывод

Таким образом, мы развили практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()